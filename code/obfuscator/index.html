<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<title>obfuscator.js</title>

<link rel="stylesheet" type="text/css" href="css/style.css" />

<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.0/jquery.min.js"></script>
<script src="js/obfuscator.js"></script>

<!--[if lt IE 9]><script type="text/javascript" src="libs/flashcanvas/bin/flashcanvas.js"></script><![endif]-->

</head>

<body>
<header>
    <h1>obfuscator.js</h1>
</header>

<div>
<!-- code examples -->
    <h2>Code 1</h2>
    <pre class="code base64">
var%20t%20%3D%20%24(%22%3Ctextarea%3E%22).prependTo(%22body%22)%3B%0Avar%20b%20%3D%20%24(%22%3Cbutton%3Eclick%20to%20encode%3C%2Fbutton%3E%22).click(function%20()%20%7B%0A%20%20var%20val%20%3D%20t.val()%3B%0A%20%20if%20(val)%20%7B%0A%20%20%20%20t.val(encodeURIComponent(val))%3B%0A%20%20%7D%0A%7D).insertBefore(t)%3B%0A%24(%22%3Cbr%3E%22).insertBefore(t)%3B
    </pre>

    <h2>Code 2</h2>
    <pre class="code base64">
%2F*!%0A%20*%20Obfuscator.js%0A%20*%20Renders%20%3Cpre%3E%20elements%20into%20canvas%20to%20prevent%20cheating%0A%20*%20http%3A%2F%2Fdraeton.github.com%2Fcode%2Fobfuscator%2F%0A%20*%0A%20*%20Copyright%202011%2C%20Matthew%20Cobbs%0A%20*%20Licensed%20under%20the%20MIT%20license.%0A%20*%2F%0A%2F*global%20jQuery%2C%20FlashCanvas*%2F%0A(function%20(window%2C%20%24)%20%7B%0A%0A%20%20%20%20%20%22use%20strict%22%3B%0A%0A%20%20%20%20var%20document%20%3D%20window.document%3B%0A%0A%20%20%20%20%2F%2F%20configuration%20variables%0A%20%20%20%20var%20c%20%3D%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20font%20size%20and%20positioning%0A%20%20%20%20%20%20%20%20fontsize%20%20%20%3A%2012%2C%0A%20%20%20%20%20%20%20%20lineheight%20%3A%2020%2C%0A%20%20%20%20%20%20%20%20font%20%20%20%20%20%20%20%3A%20%2212px%20Courier%22%2C%0A%20%20%20%20%20%20%20%20baseline%20%20%20%3A%20%22top%22%2C%0A%20%20%20%20%20%20%20%20yoffset%20%20%20%20%3A%20(20%20-%2012)%20%2F%202%20-%201%2C%0A%0A%20%20%20%20%20%20%20%20%2F%2F%20font%20colors%0A%20%20%20%20%20%20%20%20linecolor%20%20%3A%20%22blue%22%2C%0A%20%20%20%20%20%20%20%20codecolor%20%20%3A%20%22black%22%2C%0A%0A%20%20%20%20%20%20%20%20%2F%2F%20text%20start%20position%0A%20%20%20%20%20%20%20%20top%20%20%20%20%20%20%20%20%3A%2010%2C%0A%20%20%20%20%20%20%20%20left%20%20%20%20%20%20%20%3A%2015%2C%0A%20%20%20%20%20%20%20%20indent%20%20%20%20%20%3A%208%2C%0A%0A%20%20%20%20%20%20%20%20%2F%2F%20canvas%20width%0A%20%20%20%20%20%20%20%20width%20%20%20%20%20%20%3A%20600%2C%0A%0A%20%20%20%20%20%20%20%20%2F%2F%20lines%20to%20remove%20from%20code%20before%20drawing%0A%20%20%20%20%20%20%20%20check%20%20%20%20%20%20%3A%20new%20RegExp(%22%5E--remove%20this%20line--%22)%0A%20%20%20%20%7D%3B%0A%0A%20%20%20%20%2F%2F%20constructor%0A%20%20%20%20function%20Obfuscator%20(element%2C%20options)%20%7B%0A%20%20%20%20%20%20%20%20this.element%20%3D%20element%3B%0A%20%20%20%20%20%20%20%20this.settings%20%3D%20%24.extend(%7B%7D%2C%20c%2C%20options)%3B%0A%20%20%20%20%20%20%20%20this.replaceCodeBlock(element.innerText%2C%20element.className)%3B%0A%20%20%20%20%20%20%20%20%24(element).remove()%3B%0A%20%20%20%20%20%20%20%20return%20this%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20global%20reference%0A%20%20%20%20window.Obfuscator%20%3D%20Obfuscator%3B%0A%0A%20%20%20%20%2F%2F%20prototype%0A%20%20%20%20Obfuscator.prototype%20%3D%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20drawing%20canvas%2C%20context%2C%20and%20code%0A%20%20%20%20%20%20%20%20canvas%3A%20null%2C%0A%20%20%20%20%20%20%20%20context%3A%20null%2C%0A%20%20%20%20%20%20%20%20code%3A%20null%2C%0A%0A%20%20%20%20%20%20%20%20%2F%2F%20decode%20the%20base64%20encoded%20code%0A%20%20%20%20%20%20%20%20%2F%2F%20get%20the%20code%20text%20as%20an%20array%20of%20lines%0A%20%20%20%20%20%20%20%20%2F%2F%20filter%20out%20the%20garbage%20lines%0A%20%20%20%20%20%20%20%20%22getCode%22%3A%20function%20(innerText%2C%20className)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20s%20%3D%20this.settings%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(%2Fbase64%2F.test(className))%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20innerText%20%3D%20decodeURIComponent(innerText)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20code%20%3D%20%24.trim(innerText).split(%22%5Cn%22)%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20%24(code).filter(function%20(i%2C%20line)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20!s.check.test(line)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D)%3B%0A%20%20%20%20%20%20%20%20%7D%2C%0A%0A%20%20%20%20%20%20%20%20%2F%2F%20create%20the%20canvas%20element%20with%20height%20for%20the%20%23%20of%20lines%0A%20%20%20%20%20%20%20%20%2F%2F%20FlashCanvas%20for%20IE%20support%0A%20%20%20%20%20%20%20%20%22getCanvas%22%3A%20function%20(code)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20s%20%3D%20this.settings%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20canvas%20%3D%20document.createElement(%22canvas%22)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20canvas.width%20%3D%20s.width%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20canvas.height%20%3D%20code.length%20*%20s.lineheight%20%2B%20s.top%20*%202%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20canvas.style.width%20%3D%20canvas.width%20%2B%20%22px%22%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20canvas.style.height%20%3D%20canvas.height%20%2B%20%22px%22%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(typeof%20FlashCanvas%20!%3D%3D%20%22undefined%22)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20FlashCanvas.initElement(canvas)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20canvas%3B%0A%20%20%20%20%20%20%20%20%7D%2C%0A%0A%20%20%20%20%20%20%20%20%2F%2F%20write%20a%20piece%20of%20text%20to%20the%20canvas%0A%20%20%20%20%20%20%20%20%22writeText%22%3A%20function%20(text%2C%20x%2C%20y%2C%20color%2C%20align)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20s%20%3D%20this.settings%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20this.context.font%20%20%20%20%20%20%20%20%20%3D%20s.font%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20this.context.textAlign%20%20%20%20%3D%20align%20%7C%7C%20%22left%22%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20this.context.textBaseline%20%3D%20s.baseline%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20this.context.fillStyle%20%20%20%20%3D%20color%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20this.context.fillText(text%2C%20x%2C%20y)%3B%0A%20%20%20%20%20%20%20%20%7D%2C%0A%0A%20%20%20%20%20%20%20%20%22writeTextRight%22%3A%20function%20(text%2C%20x%2C%20y%2C%20color)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20this.writeText(text%2C%20x%2C%20y%2C%20color%2C%20%22right%22)%3B%0A%20%20%20%20%20%20%20%20%7D%2C%0A%0A%20%20%20%20%20%20%20%20%2F%2F%20write%20the%20line%20number%0A%20%20%20%20%20%20%20%20%2F%2F%20write%20the%20code%0A%20%20%20%20%20%20%20%20%22writeLine%22%3A%20function%20(i%2C%20line)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20s%20%3D%20this.settings%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20linex%20%3D%20s.left%20%2B%20s.indent%20-%20c.indent%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20liney%20%3D%20i%20*%20s.lineheight%20%2B%20s.top%20%2B%20s.yoffset%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20codex%20%3D%20s.left%20%2B%20s.indent%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20codey%20%3D%20i%20*%20s.lineheight%20%2B%20s.top%20%2B%20s.yoffset%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(i%20%25%202)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20draw%20an%20alternating%20background%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20this.context.fillStyle%20%20%20%3D%20'LightCyan'%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20this.context.fillRect(0%2C%20i%20*%20s.lineheight%20%2B%20s.top%2C%20s.width%2C%20s.lineheight)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20this.writeTextRight(i%20%2B%201%2C%20linex%2C%20liney%2C%20s.linecolor)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20this.writeText(line%2C%20codex%2C%20codey%2C%20s.codecolor)%3B%0A%20%20%20%20%20%20%20%20%7D%2C%0A%0A%20%20%20%20%20%20%20%20%2F%2F%20parse%20the%20code%20from%20the%20pre%20element%0A%20%20%20%20%20%20%20%20%2F%2F%20place%20and%20get%20the%20canvas%0A%20%20%20%20%20%20%20%20%2F%2F%20get%20the%20drawing%20context%0A%20%20%20%20%20%20%20%20%22replaceCodeBlock%22%3A%20function%20(innerText%2C%20className)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20s%20%3D%20this.settings%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20this.code%20%3D%20this.getCode(innerText%2C%20className)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20s.indent%20%3D%20c.indent%20*%20(this.code.length%20%2B%20%22%22).length%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20this.canvas%20%3D%20this.getCanvas(this.code)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%24(this.element).after(this.canvas)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20this.context%20%3D%20this.canvas.getContext(%222d%22)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%24(this.code).each(%24.proxy(this.writeLine%2C%20this))%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%3B%0A%0A%7D)(window%2C%20jQuery)%3B
    </pre>
<!-- end code examples -->
</div>

<script>
// on dom ready, replace each pre with canvas
$(function () {
    $("pre.code").each(function () {
        new Obfuscator(this);
    });
});
</script>
</body>
</html>
